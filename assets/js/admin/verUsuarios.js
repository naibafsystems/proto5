$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").on("click",function(){return $("html, body").animate({scrollTop:0},600),!1});var a=new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"});$("#nombre1Pers").soloNombre().maxlength(30).convertirMayuscula().verificaEspacios(),$("#nombre2Pers").soloNombre().maxlength(30).convertirMayuscula().verificaEspacios(),$("#apellido1Pers").soloNombre().maxlength(30).convertirMayuscula().verificaEspacios(),$("#apellido2Pers").soloNombre().maxlength(30).convertirMayuscula().verificaEspacios();var s=$("#tablaUsuarios").DataTable({processing:!0,ajax:base_url+"usuarios/ver/A/",columns:[{data:"usuario"},{data:"nume_docu"},{data:"nombre"},{data:"estado"},{data:"estado_form"},{data:"opciones"}],language:{url:base_url+"assets/plugins/DataTables/datatables.locale-es.json"},paging:!0,pageLength:50,bFilter:!0,ordering:!1,responsive:!0,searching:!1,info:!1});$.fn.buscarUsuarios=function(){for(var a=generarURLserialize("formUsuario"),o=0;o<a.length;o++)isNaN(a[o])&&a[o].indexOf("%2F")>0&&(a[o]=formatearFecha(a[o]));$("#btnBuscar").button("loading"),s.ajax.url(base_url+"usuarios/ver/A/"+a.join("/")).load()},$.fn.activarUsuario=function(o,e){var r="Inactivar usuario",t="¿Está seguro que desea inactivar el usuario?",i="Error al inactivar el usuario";"ac"==o&&(r="Activar usuario",t="¿Está seguro que desea activar el usuario?",i="Error al activar el usuario"),BootstrapDialog.show({title:r,message:t,type:BootstrapDialog.TYPE_WARNING,closable:!1,buttons:[{label:"Cancelar",cssClass:"btn-warning",action:function(a){a.close()}},{label:"Aceptar",cssClass:"btn-success",action:function(r){$.ajax({url:base_url+"usuarios/activar",type:"POST",dataType:"json",data:{opc:o,idUsua:e}}).done(function(o){0==o.codiError?(s.ajax.reload(),r.close()):(a.setTitle(i),a.setType(BootstrapDialog.TYPE_DANGER),a.setMessage(o.mensaje),a.open())}).fail(function(s){a.setTitle(i),a.setType(BootstrapDialog.TYPE_DANGER),a.setMessage(s.responseText),a.open()})}}]})},$("#formUsuario").on("submit",function(a){a.preventDefault(),$(this).buscarUsuarios()}),$("#btnBuscar").on("click",function(){$(this).buscarUsuarios()}),$("#tablaUsuarios").on("click",".verUsuario",function(){$(this).parents("form").find("input,select").not("[type=hidden]").val("");var s=$(this);$.ajax({url:base_url+"usuarios/validarUsuario",type:"POST",dataType:"json",data:{id:s.data("usua"),opc:"verUsuario"}}).done(function(s){0===s.codiError?window.location.href=s.url:(a.setTitle("Error al consultar el proceso"),a.setType(BootstrapDialog.TYPE_DANGER),a.setMessage(s.mensaje),a.open())}).fail(function(s){a.setTitle("Error al consultar el proceso"),a.setType(BootstrapDialog.TYPE_DANGER),a.setMessage(s.responseText),a.open()})}),$("#tablaUsuarios").on("click",".editarUsuario",function(){$(this).parents("form").find("input,select").not("[type=hidden]").val("");var s=$(this);$.ajax({url:base_url+"usuarios/validarUsuario",type:"POST",dataType:"json",data:{id:s.data("usua"),opc:"editarUsuario"}}).done(function(s){0===s.codiError?window.location.href=s.url:(a.setTitle("Error al consultar el proceso"),a.setType(BootstrapDialog.TYPE_DANGER),a.setMessage(s.mensaje),a.open())}).fail(function(s){a.setTitle("Error al consultar el proceso"),a.setType(BootstrapDialog.TYPE_DANGER),a.setMessage(s.responseText),a.open()})}),$("#tablaUsuarios").on("click",".activarUsuario",function(){var a=$(this);$(this).activarUsuario("ac",a.data("usua"))}),$("#tablaUsuarios").on("click",".inactivarUsuario",function(){var a=$(this);$(this).activarUsuario("in",a.data("usua"))}),$("#tablaUsuarios").on("draw.dt",function(){$("#btnBuscar").button("reset")})});