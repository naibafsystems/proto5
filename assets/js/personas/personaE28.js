function recargar(){window.location.href=base_url+"personas/persona"}$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").on("click",function(){return $("html, body").animate({scrollTop:0},600),!1}),$('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},position:{my:"top right"},style:{classes:"qtip-bootstrap qtip-DANE"},show:{event:"load",ready:!0},hide:function(a,s){$(this).show()}});var a=(new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"}),function(a,s){var e=$("#"+a).val(),o=$("#"+s).val();return!(parseInt(e)+parseInt(o)>28)});$.validator.addMethod("validarTotalHijos",function(s,e,o){return a(o[0],o[1])}),$("#cuantos_hombres_vivos").cargarCombo("cuantos_hombres_vivos","hoy_cuantos_hombres_vivos",base_url+"formulario/listaDesplegable").cargarCombo("cuantos_hombres_vivos","fuera_cuantos_hombres",base_url+"formulario/listaDesplegable"),$("#cuantas_mujeres_vivas").cargarCombo("cuantas_mujeres_vivas","hoy_cuantas_mujeres_vivas",base_url+"formulario/listaDesplegable").cargarCombo("cuantas_mujeres_vivas","fuera_cuantas_mujeres",base_url+"formulario/listaDesplegable"),$("#hoy_cuantos_hombres_vivos").cargarCombo("hoy_cuantos_hombres_vivos","fuera_cuantos_hombres",base_url+"formulario/listaDesplegable"),$("#hoy_cuantas_mujeres_vivas").cargarCombo("hoy_cuantas_mujeres_vivas","fuera_cuantas_mujeres",base_url+"formulario/listaDesplegable"),$("input[type=radio][name=hijos_vivos]").on("change",function(){1==$(this).val()?$("#hijos_vivos-1-panel").removeClass("hidden"):($("#hijos_vivos-1-panel").addClass("hidden"),$("#cuantos_hombres_vivos").val(""),$("#cuantas_mujeres_vivas").val(""),$("#hoy_cuantos_vivos").addClass("hidden"),$("#hoy_cuantos_hombres_vivos-col").addClass("hidden"),$("#hoy_cuantos_hombres_vivos").val(""),$("#hoy_cuantas_mujeres_vivas-col").addClass("hidden"),$("#hoy_cuantas_mujeres_vivas").val(""),$("#fuera_cuantos").addClass("hidden"),$("#fuera_cuantos_hombres-col").addClass("hidden"),$("#fuera_cuantos_hombres").val(""),$("#fuera_cuantas_mujeres-col").addClass("hidden"),$("#fuera_cuantas_mujeres").val(""))}),$("#cuantos_hombres_vivos").on("change",function(){if(""==$(this).val()||0==$(this).val()){var a=$("#cuantas_mujeres_vivas").val();$("#hoy_cuantos_vivos").addClass("hidden"),$("#fuera_cuantos").addClass("hidden"),a>0&&($("#hoy_cuantos_vivos").removeClass("hidden"),$("#fuera_cuantos").removeClass("hidden")),$("#hoy_cuantos_hombres_vivos-col").addClass("hidden"),$("#hoy_cuantos_hombres_vivos").val(""),$("#fuera_cuantos_hombres-col").addClass("hidden"),$("#fuera_cuantos_hombres").val("")}else $("#hoy_cuantos_vivos").removeClass("hidden"),$("#hoy_cuantos_hombres_vivos-col").removeClass("hidden"),$("#fuera_cuantos").removeClass("hidden"),$("#fuera_cuantos_hombres-col").removeClass("hidden")}),$("#cuantas_mujeres_vivas").on("change",function(){if(""==$(this).val()||0==$(this).val()){var a=$("#cuantos_hombres_vivos").val();$("#hoy_cuantos_vivos").addClass("hidden"),$("#fuera_cuantos").addClass("hidden"),a>0&&($("#hoy_cuantos_vivos").removeClass("hidden"),$("#fuera_cuantos").removeClass("hidden")),$("#hoy_cuantas_mujeres_vivas-col").addClass("hidden"),$("#hoy_cuantas_mujeres_vivas").val(""),$("#fuera_cuantas_mujeres-col").addClass("hidden"),$("#fuera_cuantas_mujeres").val("")}else $("#hoy_cuantos_vivos").removeClass("hidden"),$("#hoy_cuantas_mujeres_vivas-col").removeClass("hidden"),$("#fuera_cuantos").removeClass("hidden"),$("#fuera_cuantas_mujeres-col").removeClass("hidden")}),$("#frmPersona").validate({errorClass:"error-form",rules:{hijos_vivos:{required:!0,validarTotalHijos:["cuantos_hombres_vivos","cuantas_mujeres_vivas"]},cuantos_hombres_vivos:{selectVacio:!0},cuantas_mujeres_vivas:{selectVacio:!0},hoy_cuantos_hombres_vivos:{selectVacio:!0},hoy_cuantas_mujeres_vivas:{selectVacio:!0},fuera_cuantos_hombres:{selectVacio:!0},fuera_cuantas_mujeres:{selectVacio:!0}},messages:{hijos_vivos:{required:"ERROR: Seleccione si la persona ha tenido algún hijo o hija que haya nacido vivo.",validarTotalHijos:"ERROR: La suma de hombres y mujeres  que haya nacidos vivos no puede ser mayor a 28."},cuantos_hombres_vivos:{selectVacio:"ERROR: Seleccione cuántos hombres que haya nacidos vivos ha tenido la persona."},cuantas_mujeres_vivas:{selectVacio:"ERROR: Seleccione cuántas mujeres que haya nacidas vivas ha tenido la persona."},hoy_cuantos_hombres_vivos:{selectVacio:"ERROR: Seleccione actualmente cuántos hombres que haya nacidos vivos ha tenido la persona."},hoy_cuantas_mujeres_vivas:{selectVacio:"ERROR: Seleccione actualmente cuántas mujeres que haya nacidas vivas ha tenido la persona."},fuera_cuantos_hombres:{selectVacio:"ERROR: Seleccione cuántos hombres viven actualmente fuera de colombia."},fuera_cuantas_mujeres:{selectVacio:"ERROR: Seleccione cuántas mujeres viven actualmente fuera de colombia."}},onfocusout:function(a){$(a).valid()||$("#"+$(a).attr("id")).focus()},errorPlacement:function(a,s){$(s).parents(".form-group").first().append(a.attr("role","alert"))},highlight:function(a,s,e){$(a).parents(".form-group").first().addClass("has-error")},unhighlight:function(a,s,e){$(a).parents(".form-group").first().removeClass("has-error")},submitHandler:function(a){return!0}}),$("#btnSiguiente").on("click",function(){if($(".alert").addClass("hidden"),1==$("#frmPersona").valid()){var a=$("#frmPersona").validate(),s=$("input:radio[name=hijos_vivos]:checked").val(),e=$("#cuantos_hombres_vivos").val(),o=$("#cuantas_mujeres_vivas").val();if(1==s&&0==e&&0==o)return a.showErrors({cuantos_hombres_vivos:"Seleccione el número de hijo(s) o hija(s) que haya nacido vivo."}),!1;$(this).addClass("disabled").prop("disabled",!0);var r=$("#frmPersona").serialize();$.ajax({url:base_url+"personas/persona/guardar",type:"POST",dataType:"json",data:r+"&numePers="+$("#frmPersona").data("nume_pers")+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando la(s) respuesta(s). Espere por favor..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(a){0==a.codiError?($("#msgSuccess").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),setTimeout(recargar,2e3)):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"personas/persona/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(a){0==a.codiError?($("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),window.location.href=base_url+"personas/persona"):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})})});