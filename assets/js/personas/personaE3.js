function recargar(){window.location.href=base_url+"personas/persona"}$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").on("click",function(){return $("html, body").animate({scrollTop:0},600),!1}),$('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},position:{my:"top left"},style:{classes:"qtip-bootstrap qtip-DANE"}});var a=new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"});$("input[type=radio][name=etnia_persona]").on("change",function(){1==$(this).val()?($("#etnia_persona-1-panel").removeClass("hidden"),$("#etnia_persona-2-panel").addClass("hidden"),$("#vitsa_gitano").val(""),$("#kumpania").val(""),$("#habla_lengua-col").removeClass("hidden")):2==$(this).val()?($("#etnia_persona-2-panel").removeClass("hidden"),$("#etnia_persona-1-panel").addClass("hidden"),$("#pueblo_indigena").val(""),$("#clan_indigena").val(""),$("#habla_lengua-col").removeClass("hidden")):3==$(this).val()||4==$(this).val()?($("#habla_lengua-col").removeClass("hidden"),$("#etnia_persona-1-panel").addClass("hidden"),$("#pueblo_indigena").val(""),$("#clan_indigena").val(""),$("#etnia_persona-2-panel").addClass("hidden"),$("#vitsa_gitano").val(""),$("#kumpania").val("")):($("#etnia_persona-1-panel").addClass("hidden"),$("#pueblo_indigena").val(""),$("#clan_indigena").val(""),$("#etnia_persona-2-panel").addClass("hidden"),$("#vitsa_gitano").val(""),$("#habla_lengua-col").addClass("hidden"),$("input[name=habla_lengua]").prop("checked",!1),$("#otras_lenguas-col").addClass("hidden"),$("input[name=otras_lenguas]").prop("checked",!1),$("#otras_lenguas-1-panel").addClass("hidden"),$("#cuantas_lenguas").val(""))}),$("input[type=radio][name=habla_lengua]").on("change",function(){$("#otras_lenguas-col").removeClass("hidden"),1==$(this).val()?($("#habla_lengua-2-panel").addClass("hidden"),$("input[name=entiende_lengua]").prop("checked",!1),$("#otras_lenguas-1-panel").addClass("hidden"),$("#cuantas_lenguas").val("")):2==$(this).val()&&$("#habla_lengua-2-panel").removeClass("hidden")}),$("input[type=radio][name=otras_lenguas]").on("change",function(){1==$(this).val()?$("#otras_lenguas-1-panel").removeClass("hidden"):2==$(this).val()&&($("#otras_lenguas-1-panel").addClass("hidden"),$("#cuantas_lenguas").val(""))}),$("#frmPersona").validate({errorClass:"error-form",rules:{etnia_persona:{required:!0},grupo_etnico:{required:!0},pueblo_indigena:{required:!0},clan_indigena:{required:!0},vitsa_gitano:{required:!0},kumpania:{required:!0},habla_lengua:{required:!0},entiende_lengua:{required:!0},otras_lenguas:{required:!0},cuantas_lenguas:{required:!0}},messages:{etnia_persona:{required:"ERROR: Debe seleccionar la etnia de la persona."},grupo_etnico:{required:"ERROR: Debe seleccionar el grupo étnico de la persona."},pueblo_indigena:{required:"ERROR: Debe seleccionar el pueblo indigena la persona."},clan_indigena:{required:"ERROR: Debe seleccionar el clan indigena de la persona."},vitsa_gitano:{required:"ERROR: Debe seleccionar la vitsa de la persona."},kumpania:{required:"ERROR: Debe seleccionar la kumpania de la persona."},habla_lengua:{required:"ERROR: Debe seleccionar si la persona habla la lengua nativa de su pueblo."},otra_lengua:{required:"ERROR: Debe seleccionar si la persona otra(s) lengua(s) nativa(s)."},otras_lenguas:{required:"ERROR: Debe seleccionar si la persona habla otra(s) lengua(s) nativa(s)."},cuantas_lenguas:{required:"ERROR: Debe seleccionar cuantas lengua(s) nativa(s) habla."},entiende_lengua:{required:"ERROR: Debe seleccionar si la persona entiende la lengua nativa de su pueblo."},cual_lengua:{required:"ERROR: Debe seleccionar cuantas lengua(s) nativa(s) habla la persona."},habla_espanol:{required:"ERROR: Debe seleccionar si la persona habla español."}},onfocusout:function(a){$(a).valid()||$("#"+$(a).attr("id")).focus()},errorPlacement:function(a,e){$(e).parents(".form-group").first().append(a.attr("role","alert"))},highlight:function(a,e,n){$(a).parents(".form-group").first().addClass("has-error")},unhighlight:function(a,e,n){$(a).parents(".form-group").first().removeClass("has-error")},submitHandler:function(a){return!0}}),$("#btnSiguiente").on("click",function(){if($(".alert").addClass("hidden"),1==$("#frmPersona").valid()){var e=$("#frmPersona").serialize();$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"personas/persona/guardar",type:"POST",dataType:"json",data:e+"&numePers="+$("#frmPersona").data("nume_pers")+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando la(s) respuesta(s). Espere por favor..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(a){0==a.codiError?($("#msgSuccess").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),setTimeout(recargar,2e3)):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(e){a.setMessage(e.response)})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"personas/persona/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(a){0==a.codiError?($("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),window.location.href=base_url+"personas/persona"):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})})});