function recargar(){window.location.href=base_url+"personas/persona"}$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").on("click",function(){return $("html, body").animate({scrollTop:0},600),!1}),$('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},position:{my:"top left"},style:{classes:"qtip-bootstrap qtip-DANE"}});new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"});$.validator.addMethod("validarHoras",function(a,r,e){return!(a<1||a>167)}),$("input[type=radio][name=negocio_familia]").on("change",function(){1==$(this).val()?$("#negocio_familia-1-panel").removeClass("hidden"):($("#negocio_familia-1-panel").addClass("hidden"),$("#horas_negocio_familia").val(""))}),$("input[type=radio][name=venta_producto]").on("change",function(){1==$(this).val()?$("#venta_producto-1-panel").removeClass("hidden"):($("#venta_producto-1-panel").addClass("hidden"),$("#horas_venta_producto").val(""))}),$("input[type=radio][name=elaboro_producto]").on("change",function(){1==$(this).val()?$("#elaboro_producto-1-panel").removeClass("hidden"):($("#elaboro_producto-1-panel").addClass("hidden"),$("#horas_elaboro_producto").val(""))}),$("input[type=radio][name=otro_pago]").on("change",function(){1==$(this).val()?$("#otro_pago-1-panel").removeClass("hidden"):($("#otro_pago-1-panel").addClass("hidden"),$("#horas_otro_pago").val(""))}),$("input[type=radio][name=trabajo_etnico]").on("change",function(){1==$(this).val()?$("#trabajo_etnico-1-panel").removeClass("hidden"):($("#trabajo_etnico-1-panel").addClass("hidden"),$("#horas_trabajo_etnico").val(""))}),$("input[type=radio][name=labores_campo]").on("change",function(){1==$(this).val()?$("#labores_campo-1-panel").removeClass("hidden"):($("#labores_campo-1-panel").addClass("hidden"),$("#horas_labores_campo").val(""))}),$("input[type=radio][name=voluntario]").on("change",function(){1==$(this).val()?$("#voluntario-1-panel").removeClass("hidden"):($("#voluntario-1-panel").addClass("hidden"),$("#horas_voluntario").val(""))}),$("input[type=radio][name=cuido_ninos]").on("change",function(){1==$(this).val()?$("#cuido_ninos-1-panel").removeClass("hidden"):($("#cuido_ninos-1-panel").addClass("hidden"),$("#horas_cuido_ninos").val(""))}),$("input[type=radio][name=otra_actividad]").on("change",function(){1==$(this).val()?$("#otra_actividad-1-panel").removeClass("hidden"):($("#otra_actividad-1-panel").addClass("hidden"),$("#horas_otra_actividad").val(""))}),$("#frmPersona").validate({errorClass:"error-form",rules:{negocio_familia:{required:!0},horas_negocio_familia:{required:!0,validarHoras:!0},venta_producto:{required:!0},horas_venta_producto:{required:!0,validarHoras:!0},elaboro_producto:{required:!0},horas_elaboro_producto:{required:!0,validarHoras:!0},otro_pago:{required:!0},horas_otro_pago:{required:!0,validarHoras:!0},trabajo_etnico:{required:!0},horas_trabajo_etnico:{required:!0,validarHoras:!0},labores_campo:{required:!0},horas_labores_campo:{required:!0,validarHoras:!0},voluntario:{required:!0},horas_voluntario:{required:!0,validarHoras:!0},cuido_ninos:{required:!0},horas_cuido_ninos:{required:!0,validarHoras:!0},otra_actividad:{required:!0},horas_otra_actividad:{required:!0,validarHoras:!0}},messages:{negocio_familia:{required:"Error: Debe seleccionar si la persona ayudó en un negocio familiar o no familiar."},horas_negocio_familia:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."},venta_producto:{required:"Error: Debe seleccionar si la persona vendió por su cuenta algún producto."},horas_venta_producto:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."},elaboro_producto:{required:"Error: Debe seleccionar si la persona elaboró algún producto para vender."},horas_elaboro_producto:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."},otro_pago:{required:"Error: Debe seleccionar si la persona realizó otro tipo de actividad a cambio de algún pago."},horas_otro_pago:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."},trabajo_etnico:{required:"Error: Debe seleccionar si la persona participó en algún tipo de actividad colectiva o comunitaria de grupos étnicos."},horas_trabajo_etnico:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."},labores_campo:{required:"Error: Debe seleccionar si la persona ayudó en las labores del campo o en la cría de animales."},horas_labores_campo:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."},voluntario:{required:"Error: Debe seleccionar si la persona fue pasante o aprendiz, o realizó algún trabajo como voluntario."},horas_voluntario:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."},cuido_ninos:{required:"Error: Debe seleccionar si la persona cuidó niños, adultos mayores, enfermos o personas con discapacidad."},horas_cuido_ninos:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."},otra_actividad:{required:"Error: Debe seleccionar si la persona realizó otras actividades para el hogar (coser o tejer ropa, plomería, pintar la vivienda)."},horas_otra_actividad:{required:"Error: Debe digitar el número de horas a la semana.",validarHoras:"Error: Debe diligenciar máximo 167 horas."}},onfocusout:function(a){$(a).valid()||$("#"+$(a).attr("id")).focus()},errorPlacement:function(a,r){$(r).parents(".form-group").first().append(a.attr("role","alert"))},highlight:function(a,r,e){$(a).parents(".form-group").first().addClass("has-error")},unhighlight:function(a,r,e){$(a).parents(".form-group").first().removeClass("has-error")},submitHandler:function(a){return!0}}),$("#btnSiguiente").on("click",function(){if($(".alert").addClass("hidden"),1==$("#frmPersona").valid()){$(this).addClass("disabled").prop("disabled",!0);var a=$("#frmPersona").serialize();$.ajax({url:base_url+"personas/persona/guardar",type:"POST",dataType:"json",data:a+"&numePers="+$("#frmPersona").data("nume_pers")+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando la(s) respuesta(s). Espere por favor..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(a){0==a.codiError?($("#msgSuccess").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),setTimeout(recargar,2e3)):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"personas/persona/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(a){0==a.codiError?($("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),window.location.href=base_url+"personas/persona"):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})}),$("#acc_title").focus()});