function recargar(){window.location.href=base_url+"personas/persona"}$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").on("click",function(){return $("html, body").animate({scrollTop:0},600),!1}),$('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},position:{my:"top left"},style:{classes:"qtip-bootstrap qtip-DANE"}});new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"});$("#depto_5anios").cargarCombo("depto_5anios","muni_5anios",base_url+"formulario/listaDesplegable"),$("#depto_5anios").change(function(){$("option","#muni_5anios").remove()}),$("#muni_5anios").select2({allowClear:!0,language:"es",placeholder:"Municipio o área no municipalizada",theme:"bootstrap",width:"100%"}),$("input[type=radio][name=lugar_5anios]").on("change",function(){2==$(this).val()?($("#depto_5anios").val(""),$("#muni_5anios").val(""),$("#muni_5anios").select2({allowClear:!0,language:"es",placeholder:"Municipio o área no municipalizada",theme:"bootstrap",width:"100%"}),$("#pais_5anios").val(""),$("#anio_llego_5anios").val(""),$("#lugar_5anios-3-panel").addClass("hidden"),$("#lugar_5anios-4-panel").addClass("hidden"),$("#clase_5anios-col").removeClass("hidden")):3==$(this).val()?($("#lugar_5anios-3-panel").removeClass("hidden"),$("#lugar_5anios-4-panel").addClass("hidden"),$("#pais_5anios").val(""),$("#anio_llego_5anios").val(""),$("#clase_5anios-col").removeClass("hidden")):4==$(this).val()?($("#depto_5anios").val(""),$("#muni_5anios").val(""),$("#muni_5anios").select2({allowClear:!0,language:"es",placeholder:"Municipio o área no municipalizada",theme:"bootstrap",width:"100%"}),$("#lugar_5anios-4-panel").removeClass("hidden"),$("#lugar_5anios-3-panel").addClass("hidden"),$("#clase_5anios-col").addClass("hidden"),$("input[name=clase_5anios]").prop("checked",!1)):($("#lugar_5anios-3-panel").addClass("hidden"),$("#depto_5anios").val(""),$("#muni_5anios").val(""),$("#lugar_5anios-4-panel").addClass("hidden"),$("#pais_5anios").val(""),$("#anio_llego_5anios").val(""),$("#clase_5anios-col").addClass("hidden"),$("input[name=clase_5anios]").prop("checked",!1))}),$("#frmPersona").validate({errorClass:"error-form",rules:{lugar_5anios:{required:!0},depto_5anios:{selectVacio:!0,required:function(a){return 3==$("input[type=radio][name=lugar_5anios]:checked").val()}},muni_5anios:{selectVacio:!0,required:function(a){return 3==$("input[type=radio][name=lugar_5anios]:checked").val()}},pais_5anios:{selectVacio:!0},anio_llego_5anios:{selectVacio:!0},clase_5anios:{required:!0}},messages:{lugar_5anios:{required:"ERROR: Debe seleccionar donde residía la persona."},depto_5anios:{selectVacio:"ERROR: Debe seleccionar el departamento donde residía la persona.",required:"ERROR: Debe seleccionar el departamento donde residía la persona."},muni_5anios:{selectVacio:"ERROR: Debe seleccionar el municipio donde residía de la persona.",required:"ERROR: Debe seleccionar el municipio donde residía de la persona."},pais_5anios:{selectVacio:"ERROR: Debe seleccionar el país donde residía de la persona."},anio_llego_5anios:{selectVacio:"ERROR: Debe seleccionar el año en que año llegó a Colombia."},clase_5anios:{required:"ERROR: Debe seleccionar la clase donde residía la persona."}},onfocusout:function(a){$(a).valid()||$("#"+$(a).attr("id")).focus()},errorPlacement:function(a,e){$(e).parents(".form-group").first().append(a.attr("role","alert"))},highlight:function(a,e,o){$(a).parents(".form-group").first().addClass("has-error")},unhighlight:function(a,e,o){$(a).parents(".form-group").first().removeClass("has-error")},submitHandler:function(a){return!0}}),$("#btnSiguiente").on("click",function(){if(null==$("#muni_5anios").val())recargar();else if($(".alert").addClass("hidden"),1==$("#frmPersona").valid()){var a=$("#frmPersona").serialize();$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"personas/persona/guardar",type:"POST",dataType:"json",data:a+"&numePers="+$("#frmPersona").data("nume_pers")+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando la(s) respuesta(s). Espere por favor..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(a){0==a.codiError?($("#msgSuccess").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),setTimeout(recargar,2e3)):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"personas/persona/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(a){0==a.codiError?($("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),window.location.href=base_url+"personas/persona"):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})})});