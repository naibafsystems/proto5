function recargar(){window.location.href=base_url+"personas/persona"}$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").on("click",function(){return $("html, body").animate({scrollTop:0},600),!1}),$('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},position:{my:"top left"},style:{classes:"qtip-bootstrap qtip-DANE"}});new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"});$("input[type=radio][name=asistencia_educacion]").on("change",function(){1==$(this).val()?($("#principal_causa-col").addClass("hidden"),$("#deja_asistir-col").addClass("hidden")):2==$(this).val()&&($("#principal_causa-col").removeClass("hidden"),$("input[name=principal_causa]").prop("checked",!1),$("input[name=causa_familiar]").prop("checked",!1),$("input[name=causa_economica]").prop("checked",!1),$("input[name=causa_instituto]").prop("checked",!1),$("input[name=causa_educativa]").prop("checked",!1),$("input[name=causa_entorno]").prop("checked",!1),$("input[name=causa_discriminacion]").prop("checked",!1),$("input[name=causa_personal]").prop("checked",!1),$("#deja_asistir-col").removeClass("hidden"),$("input[name=deja_asistir]").prop("checked",!1))}),$("input[type=radio][name=principal_causa]").on("change",function(){$("#principal_causa-1-panel").addClass("hidden"),$("input[name=causa_familiar]").prop("checked",!1),$("#principal_causa-2-panel").addClass("hidden"),$("input[name=causa_economica]").prop("checked",!1),$("#principal_causa-3-panel").addClass("hidden"),$("input[name=causa_instituto]").prop("checked",!1),$("#principal_causa-4-panel").addClass("hidden"),$("input[name=causa_educativa]").prop("checked",!1),$("#principal_causa-5-panel").addClass("hidden"),$("input[name=causa_entorno]").prop("checked",!1),$("#principal_causa-6-panel").addClass("hidden"),$("input[name=causa_discriminacion]").prop("checked",!1),$("#principal_causa-7-panel").addClass("hidden"),$("input[name=causa_personal]").prop("checked",!1),$("#principal_causa-"+$(this).val()+"-panel").removeClass("hidden")}),$("#frmPersona").validate({errorClass:"error-form",rules:{asistencia_educacion:{required:!0},principal_causa:{required:!0},causa_familiar:{required:!0},causa_economica:{required:!0},causa_instituto:{required:!0},causa_educativa:{required:!0},causa_entorno:{required:!0},causa_discriminacion:{required:!0},causa_personal:{required:!0},deja_asistir:{required:!0},nivel_anios:{required:!0}},messages:{asistencia_educacion:{required:"ERROR: Debe seleccionar si la persona asiste a algún preescolar, escuela, colegio o universidad, de forma presencial o virtual."},principal_causa:{required:"ERROR: Debe seleccionar la principal causa por la que la persona no asiste."},causa_familiar:{required:"ERROR: Debe seleccionar la principal causa por la que la persona no asiste."},causa_economica:{required:"ERROR: Debe seleccionar la principal causa por la que la persona no asiste."},causa_instituto:{required:"ERROR: Debe seleccionar la principal causa por la que la persona no asiste."},causa_educativa:{required:"ERROR: Debe seleccionar la principal causa por la que la persona no asiste."},causa_entorno:{required:"ERROR: Debe seleccionar la principal causa por la que la persona no asiste."},causa_discriminacion:{required:"ERROR: Debe seleccionar la principal causa por la que la persona no asiste."},causa_personal:{required:"ERROR: Debe seleccionar la principal causa por la que la persona no asiste."},deja_asistir:{required:"ERROR: Debe seleccionar si la persona va a dejar de asistir definitivamente."},nivel_anios:{required:"ERROR: Debe seleccionar el nivel educativo más alto alcanzado y el último año o grado aprobado de la persona."}},onfocusout:function(a){$(a).valid()||$("#"+$(a).attr("id")).focus()},errorPlacement:function(a,e){$(e).parents(".form-group").first().append(a.attr("role","alert"))},highlight:function(a,e,i){$(a).parents(".form-group").first().addClass("has-error")},unhighlight:function(a,e,i){$(a).parents(".form-group").first().removeClass("has-error")},submitHandler:function(a){return!0}}),$("#btnSiguiente").on("click",function(){if($(".alert").addClass("hidden"),1==$("#frmPersona").valid()){$(this).addClass("disabled").prop("disabled",!0);var a=$("#frmPersona").serialize();$.ajax({url:base_url+"personas/persona/guardar",type:"POST",dataType:"json",data:a+"&numePers="+$("#frmPersona").data("nume_pers")+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando la(s) respuesta(s). Espere por favor..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(a){0==a.codiError?($("#msgSuccess").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),setTimeout(recargar,2e3)):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"personas/persona/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(a){0==a.codiError?($("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),window.location.href=base_url+"personas/persona"):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(a){window.location.href=base_url+"persona"})})});