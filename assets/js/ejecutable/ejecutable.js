$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),$('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},position:{my:"top left"},style:{classes:"qtip-bootstrap qtip-DANE"}});new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"});$("#fecha_expe-lbl").qtip({content:'<img src="http://cnpv4.dane.gov.co/dev/assets/images/cedula.jpg" alt="Owl" />',position:{my:"top right"},style:{classes:"qtip-bootstrap qtip-DANE"}});var e=function(e,o){var r=$("#"+e).val(),a=$("#"+o).val();return 0==r.length||"-"==r?($(this).val("").focus(),!1):0==a.length?($(this).val("").focus(),!1):void 0},o=function(e,o){switch(e){case"1":case"2":if(o.length<12&&o.length>5)return!0;break;case"3":if(o.length<12&&o.length>1)return!0;break;case"4":if(o.length<11&&o.length>3){var r=/[a-z]{2}\d{2,8}/;if(o.match(r))return!0}}return!1};$("#primer_nombre").soloNombre().maxlength(30).convertirMayuscula().verificaEspacios(),$("#segundo_nombre").soloNombre().maxlength(30).convertirMayuscula().verificaEspacios(),$("#primer_apellido").soloNombre().maxlength(30).convertirMayuscula().verificaEspacios(),$("#segundo_apellido").soloNombre().maxlength(30).convertirMayuscula().verificaEspacios(),$("#telefono_celular").soloNumeros(),$.validator.addMethod("validaRC",function(e,r,a){var t=$("#"+a[0]).val(),n=$("#"+a[1]).val();return(6!=t||0!=n.length)&&("1"!=n||0!=e.length&&o(n,e))}),$.validator.addMethod("validaTI",function(e,r,a){var t=$("#"+a[0]).val(),n=$("#"+a[1]).val();return(6!=t||0!=n.length)&&("2"!=n||0!=e.length&&o(n,e))}),$.validator.addMethod("validaCC",function(e,r,a){var t=$("#"+a[0]).val();return 0!=t.length&&("3"!=t||0!=e.length&&o(t,e))}),$.validator.addMethod("validaCE",function(e,r,a){var t=$("#"+a[0]).val();return 0!=t.length&&("4"!=t||0!=e.length&&o(t,e))}),$.validator.addMethod("validarCelular",function(e,o,r){if(e.length>0){if(e.length<10||isNaN(e))return!1;if(3!=e[0])return!1}return!0}),$.validator.addMethod("emailValido2",function(e,o,r){return!(e.length>0)||!!/^[a-zA-Z0-9_\-\.~]{2,}@[a-zA-Z0-9_\-\.~]{2,}\.[a-zA-Z]{2,4}$/.test(e)}),$("#tipo_documento").on("change",function(){$("#numero_documento").val(""),$("#tipo_documento option:selected").each(function(){6==$(this).val()?($("#fecha_expe-col").addClass("hidden"),$("#tipo_documento2-col").removeClass("hidden")):($("#tipo_documento2-col").addClass("hidden"),$("#tipo_documento2").val(""),3==$(this).val()?$("#fecha_expe-col").removeClass("hidden"):($("#fecha_expe-col").addClass("hidden"),$("#anio_expe").val(""),$("#mes_expe").val(""),$("#dia_expe").val("")))})}),$("#tipo_documento2").on("change",function(){5==$(this).val()?$("#nume_docu").val("").prop("readonly",!0):$("#nume_docu").val("").prop("readonly",!1)}),$("#numero_documento").on("keypress",function(e){var o=$("#tipo_documento").val();return 0==o.length||"-"==o?$(this).val("").focus():5==o&&(o=$("#tipo_documento2").val()),1==o||2==o||3==o?8==e.which||0==e.which||e.which>=48&&e.which<=57:4==o?0==e.which||8==e.which||13==e.which||(e.which>=48&&e.which<=57||(e.which>=65&&e.which<=90||e.which>=97&&e.which<=122)):void 0}),$("#numero_documento").on("blur",function(){var r=$("#tipo_documento").val(),a=$("#numero_documento").val();return!!o(r,a)&&e("tipo_documento","numero_documento")}),$("#frmCargar").validate({errorClass:"error-form",rules:{tipo_documento:{selectVacio:!0},tipo_documento2:{selectVacio:!0},cargaArchivo:{required:!0},numero_documento:{validaRC:["tipo_documento","tipo_documento2"],validaTI:["tipo_documento","tipo_documento2"],validaCC:["tipo_documento"],validaCE:["tipo_documento"]},primer_nombre:{required:!0,maxlength:30},segundo_nombre:{maxlength:30},primer_apellido:{required:!0,maxlength:30},segundo_apellido:{maxlength:30},telefono_celular:{required:!0,validarCelular:!0},correo_electronico:{required:!0,emailValido2:!0}},messages:{tipo_documento:{selectVacio:"Error: Seleccione el tipo de identificaciÃ³n de la persona."},tipo_documento2:{selectVacio:"Error: Seleccione el tipo 2 de identificaciÃ³n de la persona."},cargaArchivo:{required:"Error: Seleccione el archivo comprimido(.zip) a cargar."},numero_documento:{validaRC:"Error: La longitud del nÃºmero de documento debe serRC de 11 caracteres.",validaTI:"Error: La longitud del nÃºmero de documento debe serTI de 11 caracteres.",validaCC:"Error: La longitud del nÃºmero de documento debe estar entre 6 a 11 caracteres.",validaCE:"Error: El documento debe tener mÃ­nimo 2 letras y entre 5 a 7 dÃ­gitos."},primer_nombre:{required:"Digite el primer nombre de la persona.",maxlength:"El primer nombre no debe tener mÃ¡s de 30 caracteres."},segundo_nombre:{maxlength:"El segundo nombre no debe tener mÃ¡s de 30 caracteres."},primer_apellido:{required:"Digita el primer apellido de la persona.",maxlength:"El segundo apellido no debe tener mÃ¡s de 30 caracteres."},segundo_apellido:{maxlength:"El segundo apellido no debe tener mÃ¡s de 30 caracteres."},telefono_celular:{required:"Digite el nÃºmero de telÃ©fono celular",validarCelular:"Error: El telÃ©fono celular debe iniciar por 3 y tener 10 dÃ­gitos."},correo_electronico:{required:"Error: Digite un correo electrÃ³nico vÃ¡lido.",emailValido2:"Error: No es una direcciÃ³n de correo electrÃ³nico vÃ¡lida.",validarEmail:"Error: El correo electrÃ³nico ya esta registrado en el sistema"}},onfocusout:function(e){$(e).valid()||$("#"+$(e).attr("id")).focus()},errorPlacement:function(e,o){o.parents(".input-group").hasClass("input-group")?o.parents(".input-group").parent().append(e):$(o).parents(".form-group").first().append(e.attr("role","alert"))},highlight:function(e,o,r){$(e).parents(".input-group").hasClass("input-group")||$(e).parent(".control-option").addClass("has-error")},unhighlight:function(e,o,r){$(e).parents(".input-group").hasClass("input-group")&&"anioExpe"==$(e).attr("id")?$(e).parents(".input-group").parent().removeClass("has-error errorForm"):$(e).parents(".control-option").removeClass("has-error")},submitHandler:function(e){return!0}}),$("#btnGuardar").on("click",function(){if(1==$("#frmCargar").valid()){var e=$("#frmCargar").validate();if(0==$("#telefono_celular").val().length)return e.showErrors({telefono_celular:"Error: Digite el telÃ©fono fijo de 7 dÃ­gitos o nÃºmero celular de 10 dÃ­gitos."}),!1;if(window.navigator.userAgent.indexOf("MSIE ")<=0){var o,r,a,t=!1,n=new Array(".zip");if(o=r=a="",o=document.getElementById("cargaArchivo"),o.value){r=o.files[0],a=r.name.substring(r.name.lastIndexOf(".")).toLowerCase(),t=!1;for(var i=0;i<n.length;i++)if(n[i]==a){t=!0;break}if(!t)return $("#msjArchivo").removeClass("hidden"),$("#msjArchivo").html("Error: Formato de archivo no válido. Debe tener extensiÃ³n .zip"),!1}}$(".glyphicon-refresh-animate").removeClass("hide"),$(".glyphicon-save").addClass("hide"),$(this).addClass("disabled"),$(this).prop("disabled",!0),$("#animationload").fadeIn(),$("#frmCargar").submit()}}),$("#btnRegresar").click(function(){$(location).attr("href",base_url)}),$("#cargaArchivo").change(function(){$("#msjArchivo").addClass("hidden")}),$("#btnDescargar").click(function(){window.open(base_url+"ejecutable/generarConstancia","width=900,height=820,left=50,top=50,location=no,menubar=no,resizable=no,toolbar=no")})});