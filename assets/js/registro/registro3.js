function recargar(){window.location.href=base_url+"registro"}$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").click(function(){return $("html, body").animate({scrollTop:0},600),!1});var a=new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"}),e=function(a){return 0==a.length?($("#"+idCampo+"-error").html("Selecciona la fecha de nacimiento.").removeClass("hide").show(),$(this).val("").focus(),!1):!(calculaEdad(a,"")<18)};$.validator.addMethod("validarFecha",function(a,e,i){var r=$("#"+i[0]).val(),n=$("#"+i[1]).val(),o=$("#"+i[2]).val();if(r.length>0&&n.length>0&&o.length>0){return moment(r+"-"+n+"-"+o).isValid()}return!0}),$.validator.addMethod("validarMayorEdad",function(a,i,r){var n=$("#"+r[0]).val(),o=$("#"+r[1]).val(),d=$("#"+r[2]).val();return!(n.length>0&&o.length>0&&d.length>0)||e(n+"-"+o+"-"+d)}),$("#frmRegistro").validate({errorClass:"error-form",rules:{anio_naci:{required:!0,validarFecha:["anio_naci","mes_naci","dia_naci"],validarMayorEdad:["anio_naci","mes_naci","dia_naci"]},mes_naci:{required:!0,validarFecha:["anio_naci","mes_naci","dia_naci"],validarMayorEdad:["anio_naci","mes_naci","dia_naci"]},dia_naci:{required:!0,validarFecha:["anio_naci","mes_naci","dia_naci"],validarMayorEdad:["anio_naci","mes_naci","dia_naci"]}},messages:{anio_naci:{required:"ERROR: Seleccione el año de la fecha de nacimiento.",validarFecha:"ERROR: La fecha de nacimiento definida no es válida.",validarMayorEdad:"ERROR: Usted es menor de edad y no esta habilitado para la inscripción al eCenso."},mes_naci:{required:"ERROR: Seleccione el mes de la fecha de nacimiento.",validarFecha:"ERROR: La fecha de nacimiento definida no es válida.",validarMayorEdad:"ERROR: Usted es menor de edad y no esta habilitado para la inscripción al eCenso."},dia_naci:{required:"ERROR: Seleccione el día de la fecha de nacimiento.",validarFecha:"ERROR: La fecha de nacimiento definida no es válida.",validarMayorEdad:"ERROR: Usted es menor de edad y no esta habilitado para la inscripción al eCenso."}},onfocusout:function(a){$(a).valid()||$("#"+$(a).attr("id")).focus()},errorPlacement:function(a,e){e.parents(".input-group").hasClass("input-group")?e.parents(".input-group").parent().append(a):$(e).parents(".form-group").first().append(a.attr("role","alert"))},highlight:function(a,e,i){$(a).parents(".input-group").hasClass("input-group")||$(a).parent(".control-option").addClass("has-error")},unhighlight:function(a,e,i){$(a).parents(".input-group").hasClass("input-group")&&"anioExpe"==$(a).attr("id")?$(a).parents(".input-group").parent().removeClass("has-error errorForm"):$(a).parents(".control-option").removeClass("has-error")},submitHandler:function(a){return!0}}),$("#btnSiguiente").on("click",function(){if($(".alert").addClass("hidden"),1==$("#frmRegistro").valid()){var e=$("#frmRegistro").serialize(),i=calculaEdad($("#anio_naci").val()+"-"+$("#mes_naci").val()+"-"+$("#dia_naci").val(),"");$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"registro/guardar",type:"POST",dataType:"json",data:e+"&edad="+i+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando las respuestas..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(a){0==a.codiError?($("#msgSuccess").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),setTimeout(recargar,2e3)):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"),setTimeout(recargar,5e3))}).fail(function(e){a.setTitle("Error al guardar"),a.setType(BootstrapDialog.TYPE_DANGER),a.setMessage(e.responseText),a.open()})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"registro/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(a){0==a.codiError?($("#progressbar").html(a.avance+" COMPLETADO").css("width",a.avance),window.location.href=base_url+"registro"):($("#msgError").html(a.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(e){a.setTitle("Error al regresar"),a.setType(BootstrapDialog.TYPE_DANGER),a.setMessage(e.responseText),a.open()})})});