function recargar(){window.location.href=base_url+"registro"}$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").click(function(){return $("html, body").animate({scrollTop:0},600),!1});var e=new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"}),r=function(r){$("#"+r).val().length>0&&$.ajax({type:"POST",url:base_url+"registro/validarCorreo",data:{email:$("#"+r).val()},dataType:"json",cache:!1,beforeSend:function(){$("#animationload").fadeIn()},complete:function(){$("#animationload").fadeOut()},success:function(e){return 0===e.codiError?($("#"+r+"-error").html("").removeClass("error-form"),!0):($("#"+r+"-error").html(e.msgError).addClass("error-form"),$("#"+r).val(""),!1)},error:function(r,o,a){return e.setTitle("Validar correo electrónico único"),e.setType(BootstrapDialog.TYPE_DANGER),e.setMessage(r.responseText),e.open(),!1},timeout:1e4})};$.validator.addMethod("emailValido2",function(e,r,o){return!(e.length>0)||!!/^[a-zA-Z0-9_\-\.~]{2,}@[a-zA-Z0-9_\-\.~]{2,}\.[a-zA-Z]{2,4}$/.test(e)}),$("#correo_electronico").on("blur",function(){var e=$("#frmRegistro").validate();if(0==r("correo_electronico"))return e.showErrors({correo_electronico:"ERROR: El correo electrónico ya está registrado en el sistema."}),!1}),$("#frmRegistro").validate({errorClass:"error-form",rules:{correo_electronico:{required:!0,emailValido2:!0}},messages:{correo_electronico:{required:"ERROR: Digite un correo electrónico válido.",emailValido2:"ERROR: No es una dirección de correo electrónico válida.",validarEmail:"ERROR: El correo electrónico ya esta registrado en el sistema"},correo2_electronico:{required:"ERROR: Digite un correo electrónico válido.",emailValido2:"ERROR: No es una dirección de correo electrónico válida.",equalTo:"ERROR: El correo electrónico debe ser igual al primer correo electrónico."}},onfocusout:function(e){$(e).valid()||$("#"+$(e).attr("id")).focus()},errorPlacement:function(e,r){$(r).parents(".form-group").first().append(e.attr("role","alert"))},highlight:function(e,r,o){$(e).parents(".form-group").first().addClass("has-error")},unhighlight:function(e,r,o){$(e).parents(".form-group").first().removeClass("has-error")},submitHandler:function(e){return!0}}),$("#btnSiguiente").on("click",function(){if(1==$("#frmRegistro").valid()){var e=$("#frmRegistro").validate();if(0==r("correo_electronico"))return e.showErrors({correo_electronico:"ERROR: El correo electrónico ya está registrado en el sistema."}),!1;var o=$("#frmRegistro").serializeArray();$.each(o,function(e,r){$("#"+r.name+"-confirm").length>0&&($("#"+r.name).is("select")?$("#"+r.name+"-confirm").html($("#"+r.name+' option[value="'+r.value+'"]').html()):$("#"+r.name+"-confirm").html(r.value))}),$("#frmRegistro").addClass("hidden"),$("#mensajeConfirmacion").removeClass("hidden")}}),$("#btnAnteriorConfirmacion").on("click",function(){$("#frmRegistro").removeClass("hidden"),$("#mensajeConfirmacion").addClass("hidden")}),$("#btnSiguienteConfirmacion").on("click",function(){if($(".alert").addClass("hidden"),1==$("#frmRegistro").valid()){var o=$("#frmRegistro").validate();if(0==r("correo_electronico"))return o.showErrors({correo_electronico:"Error: El correo electrónico ya está registrado en el sistema."}),!1;var a=$("#frmRegistro").serialize();$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"registro/guardar",type:"POST",dataType:"json",data:a+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando las respuestas..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(e){0==e.codiError?($("#msgSuccess").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(e.avance+" COMPLETADO").css("width",e.avance),setTimeout(recargar,2e3)):($("#msgError").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(r){e.setTitle("Error al guardar"),e.setType(BootstrapDialog.TYPE_DANGER),e.setMessage(r.responseText),e.open()})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"registro/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(e){0==e.codiError?($("#progressbar").html(e.avance+" COMPLETADO").css("width",e.avance),window.location.href=base_url+"registro"):($("#msgError").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(r){e.setTitle("Error al regresar"),e.setType(BootstrapDialog.TYPE_DANGER),e.setMessage(r.responseText),e.open()})}),$(".terminosCondiciones").on("click",function(r){$.ajax({url:base_url+"encuesta/terminosCondiciones",type:"POST",dataType:"json"}).done(function(r){e.setTitle(r.title),e.setType(BootstrapDialog.TYPE_INFO),e.setMessage($(r.view)),e.open()}).fail(function(r){e.setTitle("Manejo de error"),e.setType(BootstrapDialog.TYPE_DANGER),e.setMessage(r.responseText),e.open()})}),$("#btnNoAcepto").click(function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$(location).attr("href",base_url+"registro/noAcepto")})});