function recargar(){window.location.href=base_url+"soporte/verUsuarios"}$(function(){redirectBrowser(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").click(function(){return $("html, body").animate({scrollTop:0},600),!1});var r=new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"}),e=function(e){$("#"+e).val().length>0&&$.ajax({type:"POST",url:base_url+"registro/validarCorreo",data:{email:$("#"+e).val()},dataType:"json",cache:!1,beforeSend:function(){$("#animationload").fadeIn()},complete:function(){$("#animationload").fadeOut()},success:function(r){return 0===r.codiError?($("#"+e+"-error").html("").removeClass("error-form"),!0):($("#"+e+"-error").html(r.msgError).addClass("error-form"),$("#"+e).val(""),!1)},error:function(e,o,a){return r.setTitle("Validar correo electrónico único"),r.setType(BootstrapDialog.TYPE_DANGER),r.setMessage(e.responseText),r.open(),!1},timeout:1e4})};$.validator.addMethod("emailValido2",function(r,e,o){return!(r.length>0)||!!/^[a-zA-Z0-9_\-\.~]{2,}@[a-zA-Z0-9_\-\.~]{2,}\.[a-zA-Z]{2,4}$/.test(r)}),$("#correo_electronico").on("blur",function(){var r=$("#formCorreo").validate();if(0==e("correo_electronico"))return r.showErrors({correo_electronico:"ERROR: El correo electrónico ya está registrado en el sistema."}),!1}),$("#formCorreo").validate({errorClass:"error-form",rules:{correo_electronico:{required:!0,emailValido2:!0}},messages:{correo_electronico:{required:"ERROR: Digite un correo electrónico válido.",emailValido2:"ERROR: No es una dirección de correo electrónico válida.",validarEmail:"ERROR: El correo electrónico ya esta registrado en el sistema"}},onfocusout:function(r){$(r).valid()||$("#"+$(r).attr("id")).focus()},errorPlacement:function(r,e){$(e).parents(".form-group").first().append(r.attr("role","alert"))},highlight:function(r,e,o){$(r).parents(".form-group").first().addClass("has-error")},unhighlight:function(r,e,o){$(r).parents(".form-group").first().removeClass("has-error")},submitHandler:function(r){return!0}}),$("#btnGuardarCorreo").on("click",function(){var e=$("#hddEncuesta").val(),o=$("#correo_electronico").val();if(1==$("#formCorreo").valid()){$("#formCorreo").serialize();$.ajax({url:base_url+"usuarios/guardarCorreo",type:"POST",dataType:"json",data:"encuesta="+e+"&correo="+o}).done(function(e){0==e.codiError?($("#msgSuccess").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),setTimeout(recargar,2e3)):(r.setTitle("Error al guardar el usuario"),r.setType(BootstrapDialog.TYPE_DANGER),r.setMessage(e.mensaje),r.open())}).fail(function(e){r.setTitle("Error al guardar el usuario"),r.setType(BootstrapDialog.TYPE_DANGER),r.setMessage(e.responseText),r.open()})}})});