function recargar(){window.location.href=base_url+"ubicacion"}$(function(){redirectBrowser(),$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),$('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},position:{my:"top left"},style:{classes:"qtip-bootstrap qtip-DANE"}});new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"});$.fn.mostrarEstaTerritoEtnico=function(e){$("#"+e+"-col").removeClass("hidden")},$.fn.mostrarNombreTerritoEtnico=function(e){$("#"+e+"-1-panel").removeClass("hidden")},$.fn.borrarEstaTerritoEtnico=function(e,a){$("input[name="+e+"]").prop("checked",!1),$("#"+a).val(""),$("#"+e+"-col").addClass("hidden"),$("#"+e+"-1-panel").addClass("hidden")},$.fn.borrarNombreTerritoEtnico=function(e,a){$("#"+a).val(""),$("#"+e+"-1-panel").addClass("hidden")},$("#nombre_ancestral").soloNombre().maxlength(20).verificaEspacios(),$("#nombre_parcialidad").soloNombre().maxlength(20).verificaEspacios(),$("#nombre_reserva").soloNombre().maxlength(20).verificaEspacios(),$("#nombre_comunidad_negra").soloNombre().maxlength(20).verificaEspacios(),$("#nombre_raizal").soloNombre().maxlength(20).verificaEspacios(),$("input[type=radio][name=es_vivi_etnico]").on("change",function(){1==$(this).val()?($(this).mostrarEstaTerritoEtnico("esta_ancestral"),$(this).mostrarEstaTerritoEtnico("esta_parcialidad"),$(this).mostrarEstaTerritoEtnico("esta_reserva"),$(this).mostrarEstaTerritoEtnico("esta_comunidad_negra"),$(this).mostrarEstaTerritoEtnico("esta_raizal")):2==$(this).val()&&($("#es_vivi_etnico-1-panel").addClass("hidden"),$(this).borrarEstaTerritoEtnico("esta_ancestral","nombre_ancestral"),$(this).borrarEstaTerritoEtnico("esta_parcialidad","nombre_parcialidad"),$(this).borrarEstaTerritoEtnico("esta_reserva","nombre_reserva"),$(this).borrarEstaTerritoEtnico("esta_comunidad_negra","nombre_comunidad_negra"),$(this).borrarEstaTerritoEtnico("esta_raizal","nombre_raizal"))}),$("input[type=radio][name=esta_ancestral]").on("change",function(){$(this).borrarNombreTerritoEtnico("esta_comunidad_negra","nombre_comunidad_negra"),$("input[name=esta_comunidad_negra]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_raizal","nombre_raizal"),$("input[name=esta_raizal]").prop("checked",!1),1==$(this).val()?$("#esta_ancestral-1-panel").removeClass("hidden"):2==$(this).val()&&$(this).borrarNombreTerritoEtnico("esta_ancestral","nombre_ancestral")}),$("input[type=radio][name=esta_parcialidad]").on("change",function(){$(this).borrarNombreTerritoEtnico("esta_comunidad_negra","nombre_comunidad_negra"),$("input[name=esta_comunidad_negra]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_raizal","nombre_raizal"),$("input[name=esta_raizal]").prop("checked",!1),1==$(this).val()?$("#esta_parcialidad-1-panel").removeClass("hidden"):2==$(this).val()&&$(this).borrarNombreTerritoEtnico("esta_parcialidad","nombre_parcialidad")}),$("input[type=radio][name=esta_reserva]").on("change",function(){$(this).borrarNombreTerritoEtnico("esta_comunidad_negra","nombre_comunidad_negra"),$("input[name=esta_comunidad_negra]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_raizal","nombre_raizal"),$("input[name=esta_raizal]").prop("checked",!1),1==$(this).val()?$("#esta_reserva-1-panel").removeClass("hidden"):2==$(this).val()&&$(this).borrarNombreTerritoEtnico("esta_reserva","nombre_reserva")}),$("input[type=radio][name=esta_comunidad_negra]").on("change",function(){$(this).borrarNombreTerritoEtnico("esta_ancestral","nombre_ancestral"),$("input[name=esta_ancestral]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_parcialidad","nombre_parcialidad"),$("input[name=esta_parcialidad]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_reserva","nombre_reserva"),$("input[name=esta_reserva]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_raizal","nombre_raizal"),$("input[name=esta_raizal]").prop("checked",!1),1==$(this).val()?$("#esta_comunidad_negra-1-panel").removeClass("hidden"):2==$(this).val()&&$(this).borrarNombreTerritoEtnico("esta_comunidad_negra","nombre_comunidad_negra")}),$("input[type=radio][name=esta_raizal]").on("change",function(){$(this).borrarNombreTerritoEtnico("esta_ancestral","nombre_ancestral"),$("input[name=esta_ancestral]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_parcialidad","nombre_parcialidad"),$("input[name=esta_parcialidad]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_reserva","nombre_reserva"),$("input[name=esta_reserva]").prop("checked",!1),$(this).borrarNombreTerritoEtnico("esta_comunidad_negra","nombre_comunidad_negra"),$("input[name=esta_comunidad_negra]").prop("checked",!1),1==$(this).val()?$("#esta_raizal-1-panel").removeClass("hidden"):2==$(this).val()&&$(this).borrarNombreTerritoEtnico("esta_raizal","nombre_raizal")}),$("#frmUbicacion").validate({errorClass:"error-form",rules:{es_vivi_etnico:{required:!0},nombre_ancestral:{required:!0},nombre_parcialidad:{required:!0},nombre_reserva:{required:!0},nombre_comunidad_negra:{required:!0},nombre_raizal:{required:!0}},messages:{es_vivi_etnico:{required:"ERROR: Seleccione si la vivienda en la cual reside habitualmente se encuentra en el interior de un territorio étnico."},nombre_ancestral:{required:"ERROR: Digite el nombre del territorio ancestral o tradicional indígena."},nombre_parcialidad:{required:"ERROR: Digite el nombre de la parcialidad o asentamiento indígena fuera de resguardo."},nombre_reserva:{required:"ERROR: Digite el nombre la reserva indígena."},nombre_comunidad_negra:{required:"ERROR: Digite el nombre del territorio ancestral o tradicional de comunidades negras no tituladas."},nombre_raizal:{required:"ERROR: Digite el nombre del territorio ancestral raizal del Archipiélago de San Andrés, Providencia y Santa Catalina."}},onfocusout:function(e){$(e).valid()||$("#"+$(e).attr("id")).focus()},errorPlacement:function(e,a){$(a).parents(".form-group").first().append(e.attr("role","alert"))},highlight:function(e,a,r){$(e).parents(".form-group").first().addClass("has-error")},unhighlight:function(e,a,r){$(e).parents(".form-group").first().removeClass("has-error")},submitHandler:function(e){return!0}}),$("#btnSiguiente").on("click",function(){if($(".alert").addClass("hidden"),1==$("#frmUbicacion").valid()){var e=$("#frmUbicacion").validate();if(1==$("input[type=radio][name=es_vivi_etnico]:checked").val()){var a=$("input[type=radio][name=esta_ancestral]:checked").val(),r=$("input[type=radio][name=esta_parcialidad]:checked").val(),i=$("input[type=radio][name=esta_reserva]:checked").val(),o=$("input[type=radio][name=esta_comunidad_negra]:checked").val(),n=$("input[type=radio][name=esta_raizal]:checked").val(),t=!0;if(1!=a&&2!=a&&(a=3),1!=r&&2!=r&&(r=3),1!=i&&2!=i&&(i=3),1!=o&&2!=o&&(o=3),1!=n&&2!=n&&(n=3),2!=a&&3!=a||2!=r&&3!=r||2!=i&&3!=i||(t=!1),0==t&&(2==o||2==n))return e.showErrors({es_vivi_etnico:"Error: Debe seleccionar el territorio étnico donde se encuentra la vivienda."}),!1;if(0==t&&3==o&&3==n)return e.showErrors({es_vivi_etnico:"Error: Debe seleccionar el territorio étnico donde se encuentra la vivienda."}),!1}var s=$("#frmUbicacion").serialize();$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"ubicacion/guardar",type:"POST",dataType:"json",data:s+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando las respuestas..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(e){0==e.codiError?($("#msgSuccess").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(e.avance+" COMPLETADO").css("width",e.avance),setTimeout(recargar,2e3)):($("#msgError").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(e){window.location.href=base_url+"ubicacion"})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"ubicacion/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(e){0==e.codiError?($("#progressbar").html(e.avance+" COMPLETADO").css("width",e.avance),window.location.href=base_url+"ubicacion"):($("#msgError").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(e){window.location.href=base_url+"ubicacion"})})});