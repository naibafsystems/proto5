function recargar(){window.location.href=base_url+"ubicacion"}$(function(){redirectBrowser(),$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover(),$(window).scroll(function(){$(this).scrollTop()>400?$(".scrollup").fadeIn():$(".scrollup").fadeOut()}),$(".scrollup").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),$('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},position:{my:"top left"},style:{classes:"qtip-bootstrap qtip-DANE"}});new BootstrapDialog({title:"Instancia del dialogo",message:"Mensaje generico"});0==$("#otro_centro_poblado-col").val().length&&$("#otro_centro_poblado-col").addClass("hidden"),$("input[type=radio][name=clase]").on("change",function(){1==$(this).val()?($("#clase-1-panel").removeClass("hidden"),$("#clase-2-panel").addClass("hidden"),$("#centro_poblado").val(""),$("#clase-3-panel").addClass("hidden"),$("input[name=tipo_centro]").prop("checked",!1),$("input[name=tipo_rural]").prop("checked",!1)):2==$(this).val()?($("#clase-1-panel").addClass("hidden"),$("#localidad").val(""),$("#clase-2-panel").removeClass("hidden"),$("#clase-3-panel").addClass("hidden"),$("input[name=tipo_rural]").prop("checked",!1)):3==$(this).val()&&($("#clase-1-panel").addClass("hidden"),$("#localidad").val(""),$("#clase-2-panel").addClass("hidden"),$("#centro_poblado").val(""),$("#clase-3-panel").removeClass("hidden"),$("input[name=tipo_centro]").prop("checked",!1))}),$("#centro_poblado").on("change",function(){888==$(this).val()?$("#otro_centro_poblado-col").removeClass("hidden"):($("#otro_centro_poblado-col").addClass("hidden"),$("#otro_centro_poblado").val(""))}),$("#frmUbicacion").validate({errorClass:"error-form",rules:{clase:{required:!0},localidad:{selectVacio:!0},centro_poblado:{selectVacio:!0},otro_centro_poblado:{required:!0}},messages:{clase:{required:"ERROR: Seleccione el lugar donde reside."},localidad:{selectVacio:"ERROR: Seleccione la localidad o comuna."},centro_poblado:{selectVacio:"ERROR: Seleccione el centro poblado."},otro_centro_poblado:{required:"ERROR: Digite el nombre del otro centro de poblado."},tipo_centro:{required:"ERROR: Seleccione el tipo de centro poblado."},tipo_rural:{required:"ERROR: Seleccione el tipo de rural disperso."}},onfocusout:function(e){$(e).valid()||$("#"+$(e).attr("id")).focus()},errorPlacement:function(e,o){$(o).parents(".form-group").first().append(e.attr("role","alert"))},highlight:function(e,o,a){$(e).parents(".form-group").first().addClass("has-error")},unhighlight:function(e,o,a){$(e).parents(".form-group").first().removeClass("has-error")},submitHandler:function(e){return!0}}),$("#btnSiguiente").on("click",function(){if($(".alert").addClass("hidden"),1==$("#frmUbicacion").valid()){var e=$("#frmUbicacion").serialize();$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"ubicacion/guardar",type:"POST",dataType:"json",data:e+"&duracion="+duracionPagina(),beforeSend:function(){$("#msgSuccess").html("Guardando la(s) respuesta(s). Espere por favor..."),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden")}}).done(function(e){0==e.codiError?($("#msgSuccess").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgSuccess").removeClass("hidden"),$("#progressbar").html(e.avance+" COMPLETADO").css("width",e.avance),setTimeout(recargar,2e3)):($("#msgError").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(e){window.location.href=base_url+"ubicacion"})}}),$("#btnAnterior").on("click",function(){$(":input").addClass("disabled").prop("disabled",!0),$(":button").addClass("disabled").prop("disabled",!0),$.ajax({url:base_url+"ubicacion/regresar",type:"POST",dataType:"json",data:"duracion="+duracionPagina()}).done(function(e){0==e.codiError?($("#progressbar").html(e.avance+" COMPLETADO").css("width",e.avance),window.location.href=base_url+"ubicacion"):($("#msgError").html(e.mensaje),$("#divMsg").removeClass("hidden"),$("#divMsgAlert").removeClass("hidden"))}).fail(function(e){window.location.href=base_url+"ubicacion"})})});